/* **PURE CSS GRID - MAXIMUM PERFORMANCE** */

/* Layout Container - holds grid and external expansion buttons */
.layoutContainer {
  position: relative;
  margin: 20px; /* Minimal margin - let grid fill most of the space */
  padding: 15px; /* Reduced padding to maximize grid area */
  /* Remove fixed height to allow background expansion */
}

/* Maximized Layout Container - when expand buttons are hidden */
.layoutContainerMaximized {
  position: relative;
  margin: 5px; /* Minimal margin for maximum space */
  padding: 5px; /* Minimal padding for maximum space */
  transition: all 0.3s ease;
}

/* External Expansion Buttons - positioned outside grid */
.expandButtonExternal {
  position: absolute;
  z-index: 30;
}

/* Small Add Buttons - clean + style */
.addButton {
  width: 32px !important;
  height: 32px !important;
  border-radius: 50% !important;
  padding: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-size: 16px !important;
  font-weight: bold !important;
  box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3) !important;
  border: 2px solid #ffffff !important;
  transition: all 0.2s ease !important;
}

.addButton:hover {
  transform: scale(1.1) !important;
  box-shadow: 0 4px 12px rgba(40, 167, 69, 0.5) !important;
}

/* Grid Container - clean without button padding */
.gridContainer {
  position: relative;
  background-color: transparent;
  border: none;
  border-radius: 0;
  overflow: hidden;
  min-height: 500px;
  /* Clean container without button spacing */
}

/* Grid Wrapper - handles scrolling with clean background */
.gridWrapper {
  position: relative;
  overflow: auto;
  /* Remove height constraints to allow background expansion */
  padding: 40px; /* Extra padding to prevent circle cutoff */
  margin: -10px; /* Small negative margin for background extension */
  /* Clean background - don't override grid background */
  background: transparent;
  /* Smooth scrolling */
  scroll-behavior: smooth;
  will-change: scroll-position;
}

/* Custom scrollbar for better UX */
.gridWrapper::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.gridWrapper::-webkit-scrollbar-track {
  background: #f1f3f4;
  border-radius: 4px;
}

.gridWrapper::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 4px;
}

.gridWrapper::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

.pureGrid {
  position: relative;
  overflow: visible;
  /* Smooth scrolling for better UX */
  scroll-behavior: smooth;
  will-change: scroll-position;

  /* **VISIBLE GRID LINES - SPANS ENTIRE FARM LAYOUT** */
  /* 
    GRID SYSTEM OVERVIEW:
    
    ┌─────┬─────┬─────┐ ← Block boundaries (green, 24ft intervals)
    │  ·  │  ·  │  ·  │ ← Planting guides (3ft intervals)
    ├─────┼─────┼─────┤ ← Grid lines connect across blocks
    │  ·  │  ·  │  ·  │ ← All circles positioned at intersections
    ├─────┼─────┼─────┤ ← 1ft precision grid (light gray)
    │  ·  │  ·  │  ·  │ ← Edge circles connected by outer lines
    └─────┴─────┴─────┘
    
    This CSS creates clearly visible grid lines that span the entire farm layout.
  */

  /* Clean white background for optimal color visibility */
  background-color: #ffffff;
  background-image: 
    /* 1ft grid lines - clearly visible light gray */ linear-gradient(
      to right,
      #ddd 1px,
      transparent 1px
    ),
    linear-gradient(to bottom, #ddd 1px, transparent 1px),
    /* 3ft grid lines - medium gray for structure */
      linear-gradient(to right, #bbb 1.5px, transparent 1.5px),
    linear-gradient(to bottom, #bbb 1.5px, transparent 1.5px),
    /* Block boundary lines - bold green every 24ft */
      linear-gradient(to right, #28a745 2.5px, transparent 2.5px),
    linear-gradient(to bottom, #28a745 2.5px, transparent 2.5px);

  background-size: 
    /* 1ft precision grid */ 24px 24px, 24px 24px,
    /* 3ft visual grouping grid */ 72px 72px, 72px 72px,
    /* 24ft block boundary grid */ 576px 576px, 576px 576px;

  /* Perfect alignment ensures grid lines pass exactly through circle centers */
  background-position: 0 0;

  /* Ensure grid extends to edges and connects outer circles */
  background-repeat: repeat;
}

/* Block labels - minimal and clean */
.blockLabel {
  user-select: none;
  z-index: 5;
  transition: opacity 0.2s ease;
  opacity: 0.8;
}

.blockLabel:hover {
  opacity: 1;
}

/* **Planted trees - only elements we render!** */
.plantedTree {
  cursor: pointer;
  transition: transform 0.2s ease;
}

.plantedTree:hover {
  transform: translate(-50%, -50%) scale(1.1);
}

/* **Tree with History - enhanced tree node with history access** */
.treeWithHistory {
  position: relative;
}

.historyIcon {
  position: absolute;
  top: -8px;
  right: -8px;
  width: 16px;
  height: 16px;
  background: rgba(40, 167, 69, 0.9);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 8px;
  cursor: pointer;
  opacity: 0;
  transition: all 0.2s ease;
  z-index: 1001;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.treeWithHistory:hover .historyIcon {
  opacity: 1;
  transform: scale(1.1);
}

.historyIcon:hover {
  background: rgba(40, 167, 69, 1);
  transform: scale(1.2) !important;
}

/* **Smart Planting Guides - 3ft intervals only** */
.plantingGuide {
  cursor: pointer;
  transition: transform 0.2s ease;
}

.plantingGuide:hover {
  transform: translate(-50%, -50%) scale(1.2);
}

.edgeGuide {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #ffffff; /* Solid white background to appear above grid lines */
  border: 2px solid #00bcd4; /* Bright Cyan border for SMALL trees */
  box-shadow: 0 2px 6px rgba(0, 188, 212, 0.3);
  opacity: 0.9;
  transition: all 0.2s ease;
  /* Ensure edge guides are above grid lines */
  position: relative;
  z-index: 10;
}

.edgeGuide:hover {
  opacity: 1;
  background: rgba(0, 188, 212, 0.1);
  border-color: #0097a7;
  box-shadow: 0 4px 12px rgba(0, 188, 212, 0.5);
}

.interiorGuide {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #ffffff; /* Solid white background to appear above grid lines */
  border: 1px solid #00bcd4; /* Bright Cyan border for SMALL trees */
  opacity: 0.7;
  transition: all 0.2s ease;
  /* Ensure interior guides are above grid lines */
  position: relative;
  z-index: 8;
}

.interiorGuide:hover {
  opacity: 1;
  background: rgba(0, 188, 212, 0.1);
  border-color: #0097a7;
  transform: scale(1.3);
}

/* Planting guide sizes based on tree types */
.edgeGuideBig {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  background: #ffffff;
  border: 3px solid #e91e63; /* Hot Pink border for BIG trees */
  box-shadow: 0 3px 8px rgba(233, 30, 99, 0.4);
  opacity: 0.9;
  transition: all 0.2s ease;
  position: relative;
  z-index: 10;
}

.edgeGuideBig:hover {
  opacity: 1;
  background: rgba(233, 30, 99, 0.1);
  border-color: #c2185b;
  box-shadow: 0 5px 15px rgba(233, 30, 99, 0.6);
}

.edgeGuideCenterBig {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  background: #ffffff;
  border: 2px solid #00ff7f; /* Spring Green border for CENTER BIG trees */
  box-shadow: 0 2px 7px rgba(0, 255, 127, 0.35);
  opacity: 0.9;
  transition: all 0.2s ease;
  position: relative;
  z-index: 10;
}

.edgeGuideCenterBig:hover {
  opacity: 1;
  background: rgba(0, 255, 127, 0.1);
  border-color: #00cc66;
  box-shadow: 0 4px 13px rgba(0, 255, 127, 0.5);
}

.edgeGuideMedium {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: #ffffff;
  border: 2px solid #9c27b0; /* Purple border for MEDIUM trees */
  box-shadow: 0 2px 7px rgba(156, 39, 176, 0.35);
  opacity: 0.9;
  transition: all 0.2s ease;
  position: relative;
  z-index: 10;
}

.edgeGuideMedium:hover {
  opacity: 1;
  background: rgba(156, 39, 176, 0.1);
  border-color: #7b1fa2;
  box-shadow: 0 4px 13px rgba(156, 39, 176, 0.5);
}

.interiorGuideBig {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: #ffffff;
  border: 2px solid #e91e63; /* Hot Pink border for BIG trees */
  opacity: 0.8;
  transition: all 0.2s ease;
  position: relative;
  z-index: 8;
}

.interiorGuideBig:hover {
  opacity: 1;
  background: rgba(233, 30, 99, 0.1);
  border-color: #c2185b;
  transform: scale(1.3);
}

.interiorGuideCenterBig {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: #ffffff;
  border: 2px solid #00ff7f; /* Spring Green border for CENTER BIG trees */
  opacity: 0.8;
  transition: all 0.2s ease;
  position: relative;
  z-index: 8;
}

.interiorGuideCenterBig:hover {
  opacity: 1;
  background: rgba(0, 255, 127, 0.1);
  border-color: #00cc66;
  transform: scale(1.3);
}

.interiorGuideMedium {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #ffffff;
  border: 1px solid #9c27b0; /* Purple border for MEDIUM trees */
  opacity: 0.75;
  transition: all 0.2s ease;
  position: relative;
  z-index: 8;
}

.interiorGuideMedium:hover {
  opacity: 1;
  background: rgba(156, 39, 176, 0.1);
  border-color: #7b1fa2;
  transform: scale(1.3);
}

/* Tiny planting guides - smallest size */
.edgeGuideTiny {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: #ffffff;
  border: 1px solid #ffc107; /* Golden Yellow border for TINY trees */
  box-shadow: 0 1px 3px rgba(255, 193, 7, 0.3);
  opacity: 0.8;
  transition: all 0.2s ease;
  position: relative;
  z-index: 10;
}

.edgeGuideTiny:hover {
  opacity: 1;
  background: rgba(255, 193, 7, 0.1);
  border-color: #e0a800;
  box-shadow: 0 2px 6px rgba(255, 193, 7, 0.4);
}

.interiorGuideTiny {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #ffffff;
  border: 1px solid #ffc107; /* Golden Yellow border for TINY trees */
  opacity: 0.6;
  transition: all 0.2s ease;
  position: relative;
  z-index: 8;
}

.interiorGuideTiny:hover {
  opacity: 1;
  background: rgba(255, 193, 7, 0.1);
  border-color: #e0a800;
  transform: scale(1.3);
}

.treeCircle {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: #00bcd4; /* Bright Cyan background for SMALL trees */
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: 700;
  border: 3px solid #ffffff;
  box-shadow: 0 3px 10px rgba(0, 188, 212, 0.5);
  user-select: none;
  /* Ensure tree circles are above everything including grid lines */
  position: relative;
  z-index: 15;
}

.treeCircle:hover {
  box-shadow: 0 4px 12px rgba(0, 188, 212, 0.6);
  border-color: #fff3cd;
}

/* Big tree circles - larger size for corner trees */
.treeCircleBig {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #e91e63; /* Hot Pink background for BIG trees */
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 700;
  border: 4px solid #ffffff;
  box-shadow: 0 4px 12px rgba(233, 30, 99, 0.6);
  user-select: none;
  position: relative;
  z-index: 15;
}

.treeCircleBig:hover {
  box-shadow: 0 5px 15px rgba(233, 30, 99, 0.7);
  border-color: #fff3cd;
}

/* Center Big tree circles - Spring Green for center positions */
.treeCircleCenterBig {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #00ff7f; /* Spring Green background for CENTER BIG trees */
  color: #2c3e50; /* Dark text for better contrast on bright green */
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: bold;
  border: 2px solid rgba(44, 62, 80, 0.3);
  box-shadow: 0 2px 8px rgba(0, 255, 127, 0.4);
  transition: all 0.2s ease;
  cursor: pointer;
  user-select: none;
  position: relative;
  z-index: 15;
}

.treeCircleCenterBig:hover {
  box-shadow: 0 5px 15px rgba(0, 255, 127, 0.7);
  border-color: #1e293b;
}

/* Medium tree circles - slightly larger size for mid-point trees */
.treeCircleMedium {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: #9c27b0; /* Purple background for MEDIUM trees */
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 15px;
  font-weight: 700;
  border: 3px solid #ffffff;
  box-shadow: 0 3px 11px rgba(156, 39, 176, 0.55);
  user-select: none;
  position: relative;
  z-index: 15;
}

.treeCircleMedium:hover {
  box-shadow: 0 4px 13px rgba(156, 39, 176, 0.65);
  border-color: #fff3cd;
}

/* Tiny tree circles - smallest size for most positions */
.treeCircleTiny {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: linear-gradient(
    135deg,
    #ffc107,
    #ffca28
  ); /* Enhanced gradient for better visual appeal */
  color: #2c3e50; /* Darker text for better contrast */
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 8px; /* Reduced from 10px for better fit */
  font-weight: 600; /* Slightly reduced from 700 for less heaviness */
  letter-spacing: 0.3px; /* Improved letter spacing for readability */
  border: 2px solid #ffffff;
  box-shadow: 0 2px 6px rgba(255, 193, 7, 0.4), 0 1px 2px rgba(0, 0, 0, 0.1);
  user-select: none;
  position: relative;
  z-index: 15;
  transition: all 0.2s ease;
}

.treeCircleTiny:hover {
  transform: scale(1.1);
  box-shadow: 0 3px 10px rgba(255, 193, 7, 0.6), 0 2px 4px rgba(0, 0, 0, 0.15);
  border-color: #fff3cd;
}

/* **Performance optimizations** */
.pureGrid * {
  box-sizing: border-box;
}

.pureGrid {
  /* Hardware acceleration for smooth grid rendering */
  transform: translateZ(0);
  backface-visibility: hidden;
  /* Smooth interactions */
  pointer-events: auto;
  /* Optimized compositing for grid background patterns */
  will-change: transform;
  /* Prevent subpixel rendering issues with grid lines */
  image-rendering: crisp-edges;
}

/* Responsive design */
@media (max-width: 768px) {
  .layoutContainer {
    margin: 15px; /* Minimal margin for mobile */
    padding: 10px;
    height: calc(100vh - 140px); /* Slightly smaller on mobile */
  }

  .gridWrapper {
    height: 100%;
    padding: 30px; /* Reduced but still enough for mobile circles */
    margin: -10px;
  }

  .treeCircle {
    width: 24px;
    height: 24px;
    font-size: 10px;
  }

  .treeCircleBig {
    width: 30px;
    height: 30px;
    font-size: 11px;
  }

  .treeCircleCenterBig {
    width: 30px;
    height: 30px;
    font-size: 11px;
  }

  .treeCircleMedium {
    width: 27px;
    height: 27px;
    font-size: 10px;
  }

  .pureGrid {
    transform: scale(0.85);
    transform-origin: top left;
  }

  .blockLabel {
    font-size: 9px !important;
    padding: 1px 4px !important;
  }

  .treeCircle {
    width: 18px;
    height: 18px;
    font-size: 8px;
  }

  .treeCircleBig {
    width: 22px;
    height: 22px;
    font-size: 9px;
  }

  .treeCircleCenterBig {
    width: 22px;
    height: 22px;
    font-size: 9px;
  }

  .treeCircleMedium {
    width: 20px;
    height: 20px;
    font-size: 8px;
  }

  .edgeGuideBig {
    width: 24px;
    height: 24px;
  }

  .edgeGuideMedium {
    width: 20px;
    height: 20px;
  }

  .interiorGuideBig {
    width: 20px;
    height: 20px;
  }

  .interiorGuideMedium {
    width: 15px;
    height: 15px;
  }

  .treeCircleTiny {
    width: 16px;
    height: 16px;
    font-size: 8px;
  }

  .edgeGuideTiny {
    width: 10px;
    height: 10px;
  }

  .interiorGuideTiny {
    width: 8px;
    height: 8px;
  }
}

@media (max-width: 576px) {
  .layoutContainer {
    margin: 10px; /* Minimal margin for small mobile */
    padding: 5px;
    height: calc(100vh - 120px); /* Even smaller on small mobile */
  }

  .gridWrapper {
    height: 100%;
    padding: 25px; /* Minimum for small mobile to prevent cutoff */
    margin: -10px;
  }

  .treeCircle {
    width: 20px;
    height: 20px;
    font-size: 8px;
  }

  .treeCircleBig {
    width: 24px;
    height: 24px;
    font-size: 9px;
  }

  .treeCircleCenterBig {
    width: 24px;
    height: 24px;
    font-size: 9px;
  }

  .treeCircleMedium {
    width: 22px;
    height: 22px;
    font-size: 8px;
  }

  .pureGrid {
    transform: scale(0.75);
    transform-origin: top left;
  }

  .blockLabel {
    font-size: 8px !important;
    padding: 1px 3px !important;
  }

  .treeCircle {
    width: 16px;
    height: 16px;
    font-size: 7px;
  }

  .treeCircleBig {
    width: 20px;
    height: 20px;
    font-size: 8px;
  }

  .treeCircleCenterBig {
    width: 20px;
    height: 20px;
    font-size: 8px;
  }

  .treeCircleMedium {
    width: 18px;
    height: 18px;
    font-size: 7px;
  }

  .edgeGuide {
    width: 14px;
    height: 14px;
  }

  .edgeGuideBig {
    width: 20px;
    height: 20px;
  }

  .edgeGuideMedium {
    width: 17px;
    height: 17px;
  }

  .interiorGuide {
    width: 10px;
    height: 10px;
  }

  .interiorGuideBig {
    width: 18px;
    height: 18px;
  }

  .interiorGuideMedium {
    width: 12px;
    height: 12px;
  }

  .treeCircleTiny {
    width: 14px;
    height: 14px;
    font-size: 7px;
  }

  .edgeGuideTiny {
    width: 8px;
    height: 8px;
  }

  .interiorGuideTiny {
    width: 6px;
    height: 6px;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .treeCircle {
    border-width: 3px;
    box-shadow: 0 0 0 2px #000000;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .plantedTree,
  .blockLabel,
  .treeCircle {
    transition: none !important;
  }

  .pureGrid {
    scroll-behavior: auto;
  }
}
